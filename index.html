<head>
	<meta charset="utf-8">
	<title>Apple Music New Releases</title>
  <link rel="stylesheet" type="text/css" href="Resources/styles.css" />
  <link rel="stylesheet" type="text/css" href="Resources/index.css" />
  <link rel="icon" href="Resources/favicon.ico">
  <link rel="apple-touch-icon" href="Resources/touch-icon-iphone.png">
  <link rel="apple-touch-icon" sizes="76x76" href="Resources/touch-icon-ipad.png">
  <link rel="apple-touch-icon" sizes="120x120" href="Resources/touch-icon-iphone-retina.png">
  <link rel="apple-touch-icon" sizes="152x152" href="Resources/touch-icon-ipad-retina.png">
  <link rel="apple-touch-icon" sizes="180x180" href="Resources/touch-icon-ipad-retina.png">
</head>

<body>
	<div class="hdr">
		<svg height="20" viewBox="0 0 83 20" width="83" xmlns="http://www.w3.org/2000/svg" class="logo" aria-hidden="true"><path d="M34.752 19.746V6.243h-.088l-5.433 13.503h-2.074L21.711 6.243h-.087v13.503h-2.548V1.399h3.235l5.833 14.621h.1l5.82-14.62h3.248v18.347h-2.56zm16.649 0h-2.586v-2.263h-.062c-.725 1.602-2.061 2.504-4.072 2.504-2.86 0-4.61-1.894-4.61-4.958V6.37h2.698v8.125c0 2.034.95 3.127 2.81 3.127 1.95 0 3.124-1.373 3.124-3.458V6.37H51.4v13.376zm7.394-13.618c3.06 0 5.046 1.73 5.134 4.196h-2.536c-.15-1.296-1.087-2.11-2.598-2.11-1.462 0-2.436.724-2.436 1.793 0 .839.6 1.41 2.023 1.741l2.136.496c2.686.636 3.71 1.704 3.71 3.636 0 2.442-2.236 4.12-5.333 4.12-3.285 0-5.26-1.64-5.509-4.183h2.673c.25 1.398 1.187 2.085 2.836 2.085 1.623 0 2.623-.687 2.623-1.78 0-.865-.487-1.373-1.924-1.704l-2.136-.508c-2.498-.585-3.735-1.806-3.735-3.75 0-2.391 2.049-4.032 5.072-4.032zM66.1 2.836c0-.878.7-1.577 1.561-1.577.862 0 1.55.7 1.55 1.577 0 .864-.688 1.576-1.55 1.576a1.573 1.573 0 0 1-1.56-1.576zm.212 3.534h2.698v13.376h-2.698zm14.089 4.603c-.275-1.424-1.324-2.556-3.085-2.556-2.086 0-3.46 1.767-3.46 4.64 0 2.938 1.386 4.642 3.485 4.642 1.66 0 2.748-.928 3.06-2.48H83C82.713 18.067 80.477 20 77.317 20c-3.76 0-6.208-2.62-6.208-6.942 0-4.247 2.448-6.93 6.183-6.93 3.385 0 5.446 2.213 5.683 4.845h-2.573zM10.824 3.189c-.698.834-1.805 1.496-2.913 1.398-.145-1.128.41-2.33 1.036-3.065C9.644.662 10.848.05 11.835 0c.121 1.178-.336 2.33-1.01 3.19zm.999 1.619c.624.049 2.425.244 3.578 1.98-.096.074-2.137 1.272-2.113 3.79.024 3.01 2.593 4.012 2.617 4.037-.024.074-.407 1.419-1.344 2.812-.817 1.224-1.657 2.422-3.002 2.447-1.297.024-1.73-.783-3.218-.783-1.489 0-1.97.758-3.194.807-1.297.048-2.28-1.297-3.097-2.52C.368 14.908-.904 10.408.825 7.375c.84-1.516 2.377-2.47 4.034-2.495 1.273-.023 2.45.857 3.218.857.769 0 2.137-1.027 3.746-.93z"></path></svg>
		New Releases
	</div>
	<div class="main">
    <h2 class="title svelte-hprj71" data-testid="header-title">2025:</h2>
        <a href="AMRs/AMR 2025-09.html">September</a> | 
        <a href="AMRs/AMR 2025-08.html">August</a> | 
        <a href="AMRs/AMR 2025-07.html">July</a> | 
        <a href="AMRs/AMR 2025-06.html">June</a> | 
        <a href="AMRs/AMR 2025-05.html">May</a> | 
        <a href="AMRs/AMR 2025-04.html">April</a> | 
        <a href="AMRs/AMR 2025-03.html">March</a> | 
        <a href="AMRs/AMR 2025-02.html">February</a> | 
        <a href="AMRs/AMR 2025-01.html">January</a><br>
    <h2 class="title svelte-hprj71" data-testid="header-title">2024:</h2>
        <a href="AMRs/AMR 2024-12.html">December</a> | 
        <a href="AMRs/AMR 2024-11.html">November</a> | 
        <a href="AMRs/AMR 2024-10.html">October</a> | 
        <a href="AMRs/AMR 2024-09.html">September</a> | 
        <a href="AMRs/AMR 2024-08.html">August</a> | 
        <a href="AMRs/AMR 2024-07.html">July</a> | 
        <a href="AMRs/AMR 2024-06.html">June</a> | 
        <a href="AMRs/AMR 2024-05.html">May</a> | 
        <a href="AMRs/AMR 2024-04.html">April</a> | 
        <a href="AMRs/AMR 2024-03.html">March</a> | 
        <a href="AMRs/AMR 2024-02.html">February</a> | 
        <a href="AMRs/AMR 2024-01.html">January</a><br>
    <h2 class="title svelte-hprj71" data-testid="header-title">2023:</h2>
        <a href="AMRs/AMR 2023-12.html">December</a> | 
        <a href="AMRs/AMR 2023-11.html">November</a> | 
        <a href="AMRs/AMR 2023-10.html">October</a> | 
        <a href="AMRs/AMR 2023-09.html">September</a> | 
        <a href="AMRs/AMR 2023-08.html">August</a> | 
        <a href="AMRs/AMR 2023-07.html">July</a> | 
        <a href="AMRs/AMR 2023-06.html">June</a> | 
        <a href="AMRs/AMR 2023-05.html">May</a> | 
        <a href="AMRs/AMR 2023-04.html">April</a> | 
        <a href="AMRs/AMR 2023-03.html">March</a> | 
        <a href="AMRs/AMR 2023-02.html">February</a> | 
        <a href="AMRs/AMR 2023-01.html">January</a><br>
    <h2 class="title svelte-hprj71" data-testid="header-title">2022:</h2>
        <a href="AMRs/AMR 2022-12.html">December</a><br>
	</div>

<div class="content-container svelte-1ehmf98" data-testid="content-container">    
  <div class="section svelte-1g7ob8i with-top-spacing" data-testid="section-container" aria-label="Coming Soon"> 
    <div class="section-content svelte-1g7ob8i" data-testid="section-content">
      <div class="header svelte-hprj71"> 
        <div class="header-title-wrapper svelte-hprj71"> 
          <h2 class="title svelte-hprj71" data-testid="header-title">Latest Releases - September 2025</h2> 
        </div> 
      </div> 

      <!-- 最新专辑内容将通过JavaScript动态加载 -->
      <div id="latest-releases-content" style="width: 100%; overflow-x: auto;">
        <div style="text-align: center; padding: 20px; color: #666;">
          正在加载最新专辑内容...
        </div>
      </div>

    </div> 
  </div>   
</div>

<!-- JavaScript代码用于加载和显示最新专辑内容 -->
<script>
// 动态加载最新月份的专辑内容
async function loadLatestReleases() {
  try {
    console.log('🔄 开始加载最新专辑内容...');
    
    // 直接从最新月份文件获取内容
    const response = await fetch('AMRs/AMR 2025-09.html');
    
    if (!response.ok) {
      throw new Error(`HTTP ${response.status}: ${response.statusText}`);
    }
    
    const htmlText = await response.text();
    console.log(`📄 文件大小: ${htmlText.length} 字符`);
    
    // 创建临时DOM元素来解析HTML
    const tempDiv = document.createElement('div');
    tempDiv.innerHTML = htmlText;
    
    // 查找所有表格
    const allTables = tempDiv.querySelectorAll('table[border="1"]');
    console.log(`📊 找到 ${allTables.length} 个表格`);
    
    if (allTables.length > 0) {
      // 取第一个表格（最新内容通常在第一个表格）
      const firstTable = allTables[0];
      console.log('📋 使用第一个表格');
      
      processTableContent(firstTable);
      console.log('✅ 成功加载并显示最新专辑内容');
      
    } else {
      console.warn('⚠️ 未找到任何表格内容');
      document.getElementById('latest-releases-content').innerHTML = 
        '<div style="text-align: center; padding: 20px; color: #999;">文件中未找到专辑表格内容</div>';
    }
  } catch (error) {
    console.error('❌ 加载专辑内容失败:', error);
    document.getElementById('latest-releases-content').innerHTML = 
      `<div style="text-align: center; padding: 20px; color: #ff6b6b;">
        <div style="margin-bottom: 10px;">⚠️ 加载失败</div>
        <div style="font-size: 12px;">错误: ${error.message}</div>
        <div style="margin-top: 10px;">
          <a href="AMRs/AMR 2025-09.html" style="color: var(--keyColor);">直接访问 September 2025 专辑页面</a>
        </div>
      </div>`;
  }
}

// 绑定Preview按钮事件
function bindPreviewButtons() {
  document.querySelectorAll('#latest-releases-content [data-frame-load]').forEach(button => {
    button.addEventListener('click', (e) => {
      e.preventDefault();
      const group = button.getAttribute('data-frame-load');
      const targetRow = document.querySelector(`#latest-releases-content [id="show${group}_"]`);
      
      if (targetRow) {
        // 切换显示/隐藏
        if (targetRow.style.display === 'none' || targetRow.style.display === '') {
          targetRow.style.display = 'table-row';
          
          // 设置iframe源
          const iframe = targetRow.querySelector('iframe[data-frame-src]');
          if (iframe && !iframe.src) {
            iframe.src = iframe.getAttribute('data-frame-src');
          }
        } else {
          targetRow.style.display = 'none';
        }
      }
    });
  });
}

// 实现show函数（从原文件复制）
function show(id) {
  const element = document.getElementById("show" + id);
  if (element) {
    if (element.style.display === 'none') {
      element.style.display = 'table-row';
    } else {
      element.style.display = 'none';
    }
  }
}

// 备用加载方案：如果fetch失败，尝试使用XMLHttpRequest
function loadLatestReleasesBackup() {
  console.log('🔄 尝试备用加载方案...');
  
  const xhr = new XMLHttpRequest();
  xhr.open('GET', 'AMRs/AMR 2025-09.html', true);
  xhr.onreadystatechange = function() {
    if (xhr.readyState === 4) {
      if (xhr.status === 200) {
        try {
          const htmlText = xhr.responseText;
          console.log(`📄 备用方案获取文件大小: ${htmlText.length} 字符`);
          
          const tempDiv = document.createElement('div');
          tempDiv.innerHTML = htmlText;
          
          const firstTable = tempDiv.querySelector('table[border="1"]');
          if (firstTable) {
            processTableContent(firstTable);
            console.log('✅ 备用方案加载成功');
          } else {
            showFallbackContent();
          }
        } catch (error) {
          console.error('❌ 备用方案解析失败:', error);
          showFallbackContent();
        }
      } else {
        console.error('❌ 备用方案HTTP错误:', xhr.status);
        showFallbackContent();
      }
    }
  };
  xhr.send();
}

// 处理表格内容的公共函数
function processTableContent(firstTable) {
  const clonedTable = firstTable.cloneNode(true);
  
  // 获取专辑行
  const allRows = Array.from(clonedTable.querySelectorAll('tr'));
  const albumRows = allRows.filter(row => 
    !row.querySelector('th') && 
    !(row.id && row.id.includes('show') && row.id.includes('_')) && 
    row.querySelector('.album_name')
  );
  
  console.log(`🎵 处理 ${albumRows.length} 个专辑`);
  
  // 限制显示数量
  const maxAlbums = 12;
  if (albumRows.length > maxAlbums) {
    const albumsToRemove = albumRows.slice(maxAlbums);
    albumsToRemove.forEach(row => {
      const frameLoadButton = row.querySelector('[data-frame-load]');
      if (frameLoadButton) {
        const groupId = frameLoadButton.getAttribute('data-frame-load');
        const correspondingIframe = clonedTable.querySelector(`[id="show${groupId}_"]`);
        if (correspondingIframe) {
          correspondingIframe.remove();
        }
      }
      row.remove();
    });
  }
  
  // 添加"查看更多"链接
  const moreRow = document.createElement('tr');
  moreRow.innerHTML = `
    <td colspan="2" style="text-align: center; padding: 20px; background-color: #f8f9fa; border-top: 2px solid #dee2e6;">
      <a href="AMRs/AMR 2025-09.html" style="color: var(--keyColor); text-decoration: none; font-weight: 600; font-size: 14px;">
        📀 查看完整的 September 2025 专辑列表 →
      </a>
    </td>
  `;
  clonedTable.appendChild(moreRow);
  
  // 显示内容
  const contentContainer = document.getElementById('latest-releases-content');
  contentContainer.innerHTML = '';
  contentContainer.appendChild(clonedTable);
  
  // 绑定事件
  bindPreviewButtons();
}

// 显示备用内容
function showFallbackContent() {
  document.getElementById('latest-releases-content').innerHTML = `
    <div style="text-align: center; padding: 30px; background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); border-radius: 12px; color: white; margin: 20px 0;">
      <div style="font-size: 48px; margin-bottom: 15px;">🎵</div>
      <h3 style="margin-bottom: 15px; font-size: 18px;">September 2025 最新专辑</h3>
      <p style="margin-bottom: 25px; opacity: 0.9; font-size: 14px;">
        发现最新的音乐发布内容
      </p>
      <div style="display: flex; gap: 15px; justify-content: center; flex-wrap: wrap;">
        <a href="AMRs/AMR 2025-09.html" 
           style="display: inline-block; background: rgba(255,255,255,0.2); color: white; 
                  padding: 12px 24px; border-radius: 8px; text-decoration: none; 
                  font-weight: 600; border: 2px solid rgba(255,255,255,0.3);
                  transition: all 0.3s ease;">
          📀 查看 September 专辑
        </a>
        <a href="AMRs/AMR 2025-08.html" 
           style="display: inline-block; background: rgba(255,255,255,0.1); color: white; 
                  padding: 12px 24px; border-radius: 8px; text-decoration: none; 
                  font-weight: 400; border: 1px solid rgba(255,255,255,0.2);">
          August
        </a>
        <a href="AMRs/AMR 2025-07.html" 
           style="display: inline-block; background: rgba(255,255,255,0.1); color: white; 
                  padding: 12px 24px; border-radius: 8px; text-decoration: none; 
                  font-weight: 400; border: 1px solid rgba(255,255,255,0.2);">
          July
        </a>
      </div>
      <div style="margin-top: 20px; font-size: 12px; opacity: 0.8;">
        🔄 页面将在未来版本中支持动态内容加载
      </div>
    </div>
  `;
}

// 页面加载完成后执行
document.addEventListener('DOMContentLoaded', () => {
  console.log('🚀 页面加载完成，开始初始化专辑内容');
  
  // 先尝试动态加载，如果失败则使用备用方案
  loadLatestReleases().catch((error) => {
    console.log('⚠️ 主要加载方案失败，尝试备用方案');
    setTimeout(() => {
      loadLatestReleasesBackup();
    }, 500);
  });
  
  // 如果两种方案都失败，5秒后显示备用内容
  setTimeout(() => {
    const contentContainer = document.getElementById('latest-releases-content');
    if (contentContainer && contentContainer.innerHTML.includes('正在加载')) {
      console.log('⏰ 加载超时，显示备用内容');
      showFallbackContent();
    }
  }, 5000);
});
</script>
<div class="main">
  <i>Updated: 2025-09-27 19:29:25.534248</i>
</div>
</body>
